"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[573],{3573:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var a=n(2535),s=n(7883),o=n(5755),i=n(8096),r=n(7218),l=n(5631),c=n(9546);function u(t){let e,n,s,o;return{c(){e=(0,a.element)("div"),n=(0,a.text)(t[1]),(0,a.attr)(e,"class","message")},m(t,s){(0,a.insert)(t,e,s),(0,a.append)(e,n),o=!0},p(t,e){(!o||2&e)&&(0,a.set_data)(n,t[1])},i(t){o||((0,a.add_render_callback)((()=>{s||(s=(0,a.create_bidirectional_transition)(e,c.slide,{},!0)),s.run(1)})),o=!0)},o(t){s||(s=(0,a.create_bidirectional_transition)(e,c.slide,{},!1)),s.run(0),o=!1},d(t){t&&(0,a.detach)(e),t&&s&&s.end()}}}function d(t){let e,n,s,o,i,r,l,c,d,p,m,h,_,f,b,g,v,$,y,x=t[1]&&u(t);return{c(){e=(0,a.element)("section"),n=(0,a.element)("form"),s=(0,a.element)("label"),s.textContent="Name",o=(0,a.space)(),i=(0,a.element)("input"),r=(0,a.space)(),l=(0,a.element)("label"),l.textContent="Phone number",c=(0,a.space)(),d=(0,a.element)("input"),p=(0,a.space)(),x&&x.c(),m=(0,a.space)(),h=(0,a.element)("label"),h.textContent="Address",_=(0,a.space)(),f=(0,a.element)("textarea"),b=(0,a.space)(),g=(0,a.element)("input"),(0,a.attr)(s,"for","name"),(0,a.attr)(i,"name","name"),(0,a.attr)(i,"type","text"),(0,a.attr)(i,"autocomplete","off"),(0,a.attr)(i,"minlength","3"),i.required=!0,(0,a.attr)(l,"for","phone"),(0,a.attr)(d,"name","phone"),(0,a.attr)(d,"autocomplete","off"),d.required=!0,(0,a.attr)(d,"type","text"),(0,a.attr)(h,"for","address"),(0,a.attr)(f,"name","address"),(0,a.attr)(f,"autocomplete","address-level4"),f.required=!0,(0,a.attr)(g,"type","submit"),g.value="Submit",(0,a.attr)(g,"class","t-btn"),(0,a.attr)(n,"class","svelte-zo8yum"),(0,a.attr)(e,"class","t-shadow svelte-zo8yum")},m(u,w){(0,a.insert)(u,e,w),(0,a.append)(e,n),(0,a.append)(n,s),(0,a.append)(n,o),(0,a.append)(n,i),(0,a.append)(n,r),(0,a.append)(n,l),(0,a.append)(n,c),(0,a.append)(n,d),(0,a.append)(n,p),x&&x.m(n,null),(0,a.append)(n,m),(0,a.append)(n,h),(0,a.append)(n,_),(0,a.append)(n,f),(0,a.append)(n,b),(0,a.append)(n,g),t[4](n),v=!0,$||(y=[(0,a.listen)(d,"input",t[3]),(0,a.listen)(d,"change",t[2])],$=!0)},p(t,e){t[1]?x?(x.p(t,e),2&e&&(0,a.transition_in)(x,1)):(x=u(t),x.c(),(0,a.transition_in)(x,1),x.m(n,m)):x&&((0,a.group_outros)(),(0,a.transition_out)(x,1,1,(()=>{x=null})),(0,a.check_outros)())},i(t){v||((0,a.transition_in)(x),v=!0)},o(t){(0,a.transition_out)(x),v=!1},d(n){n&&(0,a.detach)(e),x&&x.d(),t[4](null),$=!1,(0,a.run_all)(y)}}}function p(t){let e;return{c(){e=(0,a.text)("Close")},m(t,n){(0,a.insert)(t,e,n)},d(t){t&&(0,a.detach)(e)}}}function m(t){let e,n,s,o,i;return s=new r.default({props:{icon:"close",$$slots:{default:[p]},$$scope:{ctx:t}}}),{c(){e=(0,a.element)("div"),n=(0,a.element)("a"),(0,a.create_component)(s.$$.fragment),(0,a.attr)(n,"href",o=window.bURL+"/clients"),(0,a.attr)(n,"class","t-a-btn"),(0,a.attr)(e,"slot","top-extra")},m(t,o){(0,a.insert)(t,e,o),(0,a.append)(e,n),(0,a.mount_component)(s,n,null),i=!0},p(t,e){const n={};256&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n)},i(t){i||((0,a.transition_in)(s.$$.fragment,t),i=!0)},o(t){(0,a.transition_out)(s.$$.fragment,t),i=!1},d(t){t&&(0,a.detach)(e),(0,a.destroy_component)(s)}}}function h(t){let e,n;return e=new i.default({props:{heading:"Create a new Client",backButton:!0,$$slots:{"top-extra":[m],default:[d]},$$scope:{ctx:t}}}),{c(){(0,a.create_component)(e.$$.fragment)},m(t,s){(0,a.mount_component)(e,t,s),n=!0},p(t,[n]){const a={};259&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||((0,a.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,a.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,a.destroy_component)(e,t)}}}function _(t,e,n){var i=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(s,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function r(t){try{l(a.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,r)}l((a=a.apply(t,e||[])).next())}))};let r,c="";function u(){var t;(t=this.value,i(void 0,void 0,void 0,(function*(){if(console.log(t),!t)return"";if(t.startsWith("+91")&&t.length<14)return"Indian phone numbers must contain 10 digits";if(t.startsWith("0")&&t.length<13)return"Local landline numbers must contain 11 digits";const e=yield(0,s.action)("checkPhone",{phone:t});return e?"This number is being used by "+e:""}))).then((t=>this.setCustomValidity(n(1,c=t))))}const d=(0,o.debounce)(u);return(0,l.onMount)((()=>r.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData(r);(0,s.action)("createClient",{name:e.get("name"),phone:e.get("phone"),address:e.get("address")}).then((t=>{var e;t.uuid||alert("Client not created"),null===(e=window["svelte-router"].router)||void 0===e||e.route("/clients")}))})))),[r,c,u,function(){if(!this.value)return;let t=this.value;t=(t.startsWith("+")?"+":"")+t.replace(/[^0-9]/g,"").trim(),t.startsWith("+")||t.startsWith("0")||(t="+91"+t),t.startsWith("+91")&&t.length>3&&(t="+91 "+t.slice(3,13)),t.startsWith("0")&&(t.length>5&&(t=t.slice(0,5)+"-"+t.slice(5,11)),t.length>9&&(t=t.slice(0,9)+"-"+t.slice(9,12))),this.value=t,d.apply(this)},function(t){a.binding_callbacks[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class f extends a.SvelteComponent{constructor(t){super(),(0,a.init)(this,t,_,h,a.safe_not_equal,{})}}const b=f},8096:(t,e,n)=>{n.d(e,{default:()=>p});var a=n(2535),s=n(9546),o=n(1680);const i=t=>({}),r=t=>({});function l(t){let e;return{c(){e=(0,a.element)("a"),e.innerHTML='<span class="material-icons">arrow_back</span>',(0,a.attr)(e,"href","javascript:history.back()"),(0,a.attr)(e,"class","t-a-btn svelte-ba4chm")},m(t,n){(0,a.insert)(t,e,n)},d(t){t&&(0,a.detach)(e)}}}function c(t){let e,n,o,c,u,d,p,m,h,_,f=t[0]&&l();const b=t[4]["top-extra"],g=(0,a.create_slot)(b,t,t[3],r),v=t[4].default,$=(0,a.create_slot)(v,t,t[3],null);return{c(){e=(0,a.element)("div"),n=(0,a.element)("div"),f&&f.c(),o=(0,a.space)(),c=(0,a.element)("div"),u=(0,a.text)(t[1]),d=(0,a.space)(),g&&g.c(),p=(0,a.space)(),m=(0,a.element)("div"),$&&$.c(),(0,a.attr)(c,"class","heading svelte-ba4chm"),(0,a.attr)(n,"class","top svelte-ba4chm"),(0,a.attr)(m,"class","content svelte-ba4chm"),(0,a.attr)(e,"class","page svelte-ba4chm")},m(t,s){(0,a.insert)(t,e,s),(0,a.append)(e,n),f&&f.m(n,null),(0,a.append)(n,o),(0,a.append)(n,c),(0,a.append)(c,u),(0,a.append)(n,d),g&&g.m(n,null),(0,a.append)(e,p),(0,a.append)(e,m),$&&$.m(m,null),_=!0},p(t,[e]){t[0]?f||(f=l(),f.c(),f.m(n,o)):f&&(f.d(1),f=null),(!_||2&e)&&(0,a.set_data)(u,t[1]),g&&g.p&&(!_||8&e)&&(0,a.update_slot_base)(g,b,t,t[3],_?(0,a.get_slot_changes)(b,t[3],e,i):(0,a.get_all_dirty_from_scope)(t[3]),r),$&&$.p&&(!_||8&e)&&(0,a.update_slot_base)($,v,t,t[3],_?(0,a.get_slot_changes)(v,t[3],e,null):(0,a.get_all_dirty_from_scope)(t[3]),null)},i(t){_||((0,a.transition_in)(g,t),(0,a.transition_in)($,t),(0,a.add_render_callback)((()=>{h||(h=(0,a.create_bidirectional_transition)(e,s.slide,{},!0)),h.run(1)})),_=!0)},o(t){(0,a.transition_out)(g,t),(0,a.transition_out)($,t),h||(h=(0,a.create_bidirectional_transition)(e,s.slide,{},!1)),h.run(0),_=!1},d(t){t&&(0,a.detach)(e),f&&f.d(),g&&g.d(t),$&&$.d(t),t&&h&&h.end()}}}function u(t,e,n){let s,{$$slots:i={},$$scope:r}=e;const l=(0,o.default)();let c=l.mobile;(0,a.component_subscribe)(t,c,(t=>n(5,s=t))),l.drawer.set(!s);let{backButton:u=!1}=e,{heading:d}=e;return document.body.scrollTop=0,document.documentElement.scrollTop=0,t.$$set=t=>{"backButton"in t&&n(0,u=t.backButton),"heading"in t&&n(1,d=t.heading),"$$scope"in t&&n(3,r=t.$$scope)},[u,d,c,r,i]}class d extends a.SvelteComponent{constructor(t){super(),(0,a.init)(this,t,u,c,a.safe_not_equal,{backButton:0,heading:1})}}const p=d},5755:(t,e,n)=>{function a(t,e=700){let n;return function(...a){const s=this;clearTimeout(n),n=setTimeout((()=>t.apply(s,a)),e)}}n.d(e,{debounce:()=>a})}}]);
//# sourceMappingURL=573.js.map