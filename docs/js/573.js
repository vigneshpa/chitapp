"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[573],{3573:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var s=n(2535),o=n(1828),i=n(5755),r=n(8096),a=n(7218),l=n(5631),c=n(9546);function u(t){let e,n,o,i;return{c(){e=(0,s.bGB)("div"),n=(0,s.fLW)(t[1]),(0,s.Ljt)(e,"class","message")},m(t,o){(0,s.$Tr)(t,e,o),(0,s.R3I)(e,n),i=!0},p(t,e){(!i||2&e)&&(0,s.rTO)(n,t[1])},i(t){i||((0,s.P$F)((()=>{o||(o=(0,s.uPJ)(e,c.JD,{},!0)),o.run(1)})),i=!0)},o(t){o||(o=(0,s.uPJ)(e,c.JD,{},!1)),o.run(0),i=!1},d(t){t&&(0,s.ogt)(e),t&&o&&o.end()}}}function d(t){let e,n,o,i,r,a,l,c,d,h,m,p,f,b,$,v,L,g,I,j=t[1]&&u(t);return{c(){e=(0,s.bGB)("section"),n=(0,s.bGB)("form"),o=(0,s.bGB)("label"),o.textContent="Name",i=(0,s.DhX)(),r=(0,s.bGB)("input"),a=(0,s.DhX)(),l=(0,s.bGB)("label"),l.textContent="Phone number",c=(0,s.DhX)(),d=(0,s.bGB)("input"),h=(0,s.DhX)(),j&&j.c(),m=(0,s.DhX)(),p=(0,s.bGB)("label"),p.textContent="Address",f=(0,s.DhX)(),b=(0,s.bGB)("textarea"),$=(0,s.DhX)(),v=(0,s.bGB)("input"),(0,s.Ljt)(o,"for","name"),(0,s.Ljt)(r,"name","name"),(0,s.Ljt)(r,"type","text"),(0,s.Ljt)(r,"autocomplete","off"),(0,s.Ljt)(r,"minlength","3"),r.required=!0,(0,s.Ljt)(l,"for","phone"),(0,s.Ljt)(d,"name","phone"),(0,s.Ljt)(d,"autocomplete","off"),d.required=!0,(0,s.Ljt)(d,"type","text"),(0,s.Ljt)(p,"for","address"),(0,s.Ljt)(b,"name","address"),(0,s.Ljt)(b,"autocomplete","address-level4"),b.required=!0,(0,s.Ljt)(v,"type","submit"),v.value="Submit",(0,s.Ljt)(v,"class","t-btn"),(0,s.Ljt)(n,"class","svelte-zo8yum"),(0,s.Ljt)(e,"class","t-shadow svelte-zo8yum")},m(u,R){(0,s.$Tr)(u,e,R),(0,s.R3I)(e,n),(0,s.R3I)(n,o),(0,s.R3I)(n,i),(0,s.R3I)(n,r),(0,s.R3I)(n,a),(0,s.R3I)(n,l),(0,s.R3I)(n,c),(0,s.R3I)(n,d),(0,s.R3I)(n,h),j&&j.m(n,null),(0,s.R3I)(n,m),(0,s.R3I)(n,p),(0,s.R3I)(n,f),(0,s.R3I)(n,b),(0,s.R3I)(n,$),(0,s.R3I)(n,v),t[4](n),L=!0,g||(I=[(0,s.oLt)(d,"input",t[3]),(0,s.oLt)(d,"change",t[2])],g=!0)},p(t,e){t[1]?j?(j.p(t,e),2&e&&(0,s.Ui)(j,1)):(j=u(t),j.c(),(0,s.Ui)(j,1),j.m(n,m)):j&&((0,s.dvw)(),(0,s.etI)(j,1,1,(()=>{j=null})),(0,s.gbL)())},i(t){L||((0,s.Ui)(j),L=!0)},o(t){(0,s.etI)(j),L=!1},d(n){n&&(0,s.ogt)(e),j&&j.d(),t[4](null),g=!1,(0,s.j7q)(I)}}}function h(t){let e;return{c(){e=(0,s.fLW)("Close")},m(t,n){(0,s.$Tr)(t,e,n)},d(t){t&&(0,s.ogt)(e)}}}function m(t){let e,n,o,i,r;return o=new a.Z({props:{icon:"close",$$slots:{default:[h]},$$scope:{ctx:t}}}),{c(){e=(0,s.bGB)("div"),n=(0,s.bGB)("a"),(0,s.YCL)(o.$$.fragment),(0,s.Ljt)(n,"href",i=window.bURL+"/clients"),(0,s.Ljt)(n,"class","t-a-btn"),(0,s.Ljt)(e,"slot","top-extra")},m(t,i){(0,s.$Tr)(t,e,i),(0,s.R3I)(e,n),(0,s.yef)(o,n,null),r=!0},p(t,e){const n={};256&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){r||((0,s.Ui)(o.$$.fragment,t),r=!0)},o(t){(0,s.etI)(o.$$.fragment,t),r=!1},d(t){t&&(0,s.ogt)(e),(0,s.vpE)(o)}}}function p(t){let e,n;return e=new r.Z({props:{heading:"Create a new Client",backButton:!0,$$slots:{"top-extra":[m],default:[d]},$$scope:{ctx:t}}}),{c(){(0,s.YCL)(e.$$.fragment)},m(t,o){(0,s.yef)(e,t,o),n=!0},p(t,[n]){const s={};259&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.etI)(e.$$.fragment,t),n=!1},d(t){(0,s.vpE)(e,t)}}}function f(t,e,n){var r=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,i){function r(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};let a,c="";function u(){var t;(t=this.value,r(void 0,void 0,void 0,(function*(){if(console.log(t),!t)return"";if(t.startsWith("+91")&&t.length<14)return"Indian phone numbers must contain 10 digits";if(t.startsWith("0")&&t.length<13)return"Local landline numbers must contain 11 digits";const e=yield(0,o.aD)("checkPhone",{phone:t});return e?"This number is being used by "+e:""}))).then((t=>this.setCustomValidity(n(1,c=t))))}const d=(0,i.D)(u);return(0,l.H3)((()=>a.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData(a);(0,o.aD)("createClient",{name:e.get("name"),phone:e.get("phone"),address:e.get("address")}).then((t=>{var e;t.uuid||alert("Client not created"),null===(e=window["svelte-router"].router)||void 0===e||e.route("/clients")}))})))),[a,c,u,function(){if(!this.value)return;let t=this.value;t=(t.startsWith("+")?"+":"")+t.replace(/[^0-9]/g,"").trim(),t.startsWith("+")||t.startsWith("0")||(t="+91"+t),t.startsWith("+91")&&t.length>3&&(t="+91 "+t.slice(3,13)),t.startsWith("0")&&(t.length>5&&(t=t.slice(0,5)+"-"+t.slice(5,11)),t.length>9&&(t=t.slice(0,9)+"-"+t.slice(9,12))),this.value=t,d.apply(this)},function(t){s.VnY[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class b extends s.f_C{constructor(t){super(),(0,s.S1n)(this,t,f,p,s.N8,{})}}const $=b},8096:(t,e,n)=>{n.d(e,{Z:()=>h});var s=n(2535),o=n(9546),i=n(1680);const r=t=>({}),a=t=>({});function l(t){let e;return{c(){e=(0,s.bGB)("a"),e.innerHTML='<span class="material-icons-outlined">arrow_back</span>',(0,s.Ljt)(e,"href","javascript:history.back()"),(0,s.Ljt)(e,"class","t-a-btn svelte-ba4chm")},m(t,n){(0,s.$Tr)(t,e,n)},d(t){t&&(0,s.ogt)(e)}}}function c(t){let e,n,i,c,u,d,h,m,p,f,b=t[0]&&l();const $=t[4]["top-extra"],v=(0,s.nuO)($,t,t[3],a),L=t[4].default,g=(0,s.nuO)(L,t,t[3],null);return{c(){e=(0,s.bGB)("div"),n=(0,s.bGB)("div"),b&&b.c(),i=(0,s.DhX)(),c=(0,s.bGB)("div"),u=(0,s.fLW)(t[1]),d=(0,s.DhX)(),v&&v.c(),h=(0,s.DhX)(),m=(0,s.bGB)("div"),g&&g.c(),(0,s.Ljt)(c,"class","heading svelte-ba4chm"),(0,s.Ljt)(n,"class","top svelte-ba4chm"),(0,s.Ljt)(m,"class","content svelte-ba4chm"),(0,s.Ljt)(e,"class","page svelte-ba4chm")},m(t,o){(0,s.$Tr)(t,e,o),(0,s.R3I)(e,n),b&&b.m(n,null),(0,s.R3I)(n,i),(0,s.R3I)(n,c),(0,s.R3I)(c,u),(0,s.R3I)(n,d),v&&v.m(n,null),(0,s.R3I)(e,h),(0,s.R3I)(e,m),g&&g.m(m,null),f=!0},p(t,[e]){t[0]?b||(b=l(),b.c(),b.m(n,i)):b&&(b.d(1),b=null),(!f||2&e)&&(0,s.rTO)(u,t[1]),v&&v.p&&(!f||8&e)&&(0,s.kmG)(v,$,t,t[3],f?(0,s.u2N)($,t[3],e,r):(0,s.VOJ)(t[3]),a),g&&g.p&&(!f||8&e)&&(0,s.kmG)(g,L,t,t[3],f?(0,s.u2N)(L,t[3],e,null):(0,s.VOJ)(t[3]),null)},i(t){f||((0,s.Ui)(v,t),(0,s.Ui)(g,t),(0,s.P$F)((()=>{p||(p=(0,s.uPJ)(e,o.JD,{},!0)),p.run(1)})),f=!0)},o(t){(0,s.etI)(v,t),(0,s.etI)(g,t),p||(p=(0,s.uPJ)(e,o.JD,{},!1)),p.run(0),f=!1},d(t){t&&(0,s.ogt)(e),b&&b.d(),v&&v.d(t),g&&g.d(t),t&&p&&p.end()}}}function u(t,e,n){let o,{$$slots:r={},$$scope:a}=e;const l=(0,i.Z)();let c=l.mobile;(0,s.FIv)(t,c,(t=>n(5,o=t))),l.drawer.set(!o);let{backButton:u=!1}=e,{heading:d}=e;return document.body.scrollTop=0,document.documentElement.scrollTop=0,t.$$set=t=>{"backButton"in t&&n(0,u=t.backButton),"heading"in t&&n(1,d=t.heading),"$$scope"in t&&n(3,a=t.$$scope)},[u,d,c,a,r]}class d extends s.f_C{constructor(t){super(),(0,s.S1n)(this,t,u,c,s.N8,{backButton:0,heading:1})}}const h=d},5755:(t,e,n)=>{function s(t,e=700){let n;return function(...s){const o=this;clearTimeout(n),n=setTimeout((()=>t.apply(o,s)),e)}}n.d(e,{D:()=>s})}}]);
//# sourceMappingURL=573.js.map