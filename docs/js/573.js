"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[573],{3573:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var s=n(2535),o=n(2717),a=n(5755),l=n(8096),r=n(7218),i=n(5631),c=n(9546);function u(t){let e,n,o,a;return{c(){e=(0,s.bGB)("div"),n=(0,s.fLW)(t[1]),(0,s.Ljt)(e,"class","message")},m(t,o){(0,s.$Tr)(t,e,o),(0,s.R3I)(e,n),a=!0},p(t,e){(!a||2&e)&&(0,s.rTO)(n,t[1])},i(t){a||((0,s.P$F)((()=>{o||(o=(0,s.uPJ)(e,c.JD,{},!0)),o.run(1)})),a=!0)},o(t){o||(o=(0,s.uPJ)(e,c.JD,{},!1)),o.run(0),a=!1},d(t){t&&(0,s.ogt)(e),t&&o&&o.end()}}}function d(t){let e,n,o,a,l,r,i,c,d,h,m,p,b,f,$,L,g,I,v,j=t[1]&&u(t);return{c(){e=(0,s.bGB)("section"),n=(0,s.bGB)("form"),o=(0,s.bGB)("label"),o.textContent="Name",a=(0,s.DhX)(),l=(0,s.bGB)("input"),r=(0,s.DhX)(),i=(0,s.bGB)("label"),i.textContent="Phone number",c=(0,s.DhX)(),d=(0,s.bGB)("input"),h=(0,s.DhX)(),j&&j.c(),m=(0,s.DhX)(),p=(0,s.bGB)("label"),p.textContent="Address",b=(0,s.DhX)(),f=(0,s.bGB)("textarea"),$=(0,s.DhX)(),L=(0,s.bGB)("input"),(0,s.Ljt)(o,"for","name"),(0,s.Ljt)(l,"name","name"),(0,s.Ljt)(l,"type","text"),(0,s.Ljt)(l,"autocomplete","off"),(0,s.Ljt)(l,"minlength","3"),l.required=!0,(0,s.Ljt)(i,"for","phone"),(0,s.Ljt)(d,"name","phone"),(0,s.Ljt)(d,"autocomplete","off"),d.required=!0,(0,s.Ljt)(d,"type","text"),(0,s.Ljt)(p,"for","address"),(0,s.Ljt)(f,"name","address"),(0,s.Ljt)(f,"autocomplete","address-level4"),f.required=!0,(0,s.Ljt)(L,"type","submit"),L.value="Submit",(0,s.Ljt)(L,"class","t-btn"),(0,s.Ljt)(n,"class","svelte-zo8yum"),(0,s.Ljt)(e,"class","t-shadow svelte-zo8yum")},m(u,R){(0,s.$Tr)(u,e,R),(0,s.R3I)(e,n),(0,s.R3I)(n,o),(0,s.R3I)(n,a),(0,s.R3I)(n,l),(0,s.R3I)(n,r),(0,s.R3I)(n,i),(0,s.R3I)(n,c),(0,s.R3I)(n,d),(0,s.R3I)(n,h),j&&j.m(n,null),(0,s.R3I)(n,m),(0,s.R3I)(n,p),(0,s.R3I)(n,b),(0,s.R3I)(n,f),(0,s.R3I)(n,$),(0,s.R3I)(n,L),t[4](n),g=!0,I||(v=[(0,s.oLt)(d,"input",t[3]),(0,s.oLt)(d,"change",t[2])],I=!0)},p(t,e){t[1]?j?(j.p(t,e),2&e&&(0,s.Ui)(j,1)):(j=u(t),j.c(),(0,s.Ui)(j,1),j.m(n,m)):j&&((0,s.dvw)(),(0,s.etI)(j,1,1,(()=>{j=null})),(0,s.gbL)())},i(t){g||((0,s.Ui)(j),g=!0)},o(t){(0,s.etI)(j),g=!1},d(n){n&&(0,s.ogt)(e),j&&j.d(),t[4](null),I=!1,(0,s.j7q)(v)}}}function h(t){let e;return{c(){e=(0,s.fLW)("Close")},m(t,n){(0,s.$Tr)(t,e,n)},d(t){t&&(0,s.ogt)(e)}}}function m(t){let e,n,o,a,l;return o=new r.Z({props:{icon:"close",$$slots:{default:[h]},$$scope:{ctx:t}}}),{c(){e=(0,s.bGB)("div"),n=(0,s.bGB)("a"),(0,s.YCL)(o.$$.fragment),(0,s.Ljt)(n,"href",a=window.bURL+"/clients"),(0,s.Ljt)(n,"class","t-a-btn"),(0,s.Ljt)(e,"slot","top-extra")},m(t,a){(0,s.$Tr)(t,e,a),(0,s.R3I)(e,n),(0,s.yef)(o,n,null),l=!0},p(t,e){const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){l||((0,s.Ui)(o.$$.fragment,t),l=!0)},o(t){(0,s.etI)(o.$$.fragment,t),l=!1},d(t){t&&(0,s.ogt)(e),(0,s.vpE)(o)}}}function p(t){let e,n;return e=new l.Z({props:{heading:"Create a new Client",backButton:!0,$$slots:{"top-extra":[m],default:[d]},$$scope:{ctx:t}}}),{c(){(0,s.YCL)(e.$$.fragment)},m(t,o){(0,s.yef)(e,t,o),n=!0},p(t,[n]){const s={};131&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.etI)(e.$$.fragment,t),n=!1},d(t){(0,s.vpE)(e,t)}}}function b(t,e,n){let l,r="";function c(){(async t=>{if(console.log(t),!t)return"";if(t.startsWith("+91")&&t.length<14)return"Indian phone numbers must contain 10 digits";if(t.startsWith("0")&&t.length<13)return"Local landline numbers must contain 11 digits";const e=await(0,o.aD)("checkPhone",{phone:t});return e?"This number is being used by "+e:""})(this.value).then((t=>this.setCustomValidity(n(1,r=t))))}const u=(0,a.D)(c);return(0,i.H3)((()=>l.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData(l);(0,o.aD)("createClient",{name:e.get("name"),phone:e.get("phone"),address:e.get("address")}).then((t=>{t.uuid||alert("Client not created"),window["svelte-router"].router?.route("/clients")}))})))),[l,r,c,function(){if(!this.value)return;let t=this.value;t=(t.startsWith("+")?"+":"")+t.replace(/[^0-9]/g,"").trim(),t.startsWith("+")||t.startsWith("0")||(t="+91"+t),t.startsWith("+91")&&t.length>3&&(t="+91 "+t.slice(3,13)),t.startsWith("0")&&(t.length>5&&(t=t.slice(0,5)+"-"+t.slice(5,11)),t.length>9&&(t=t.slice(0,9)+"-"+t.slice(9,12))),this.value=t,u.apply(this)},function(t){s.VnY[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class f extends s.f_C{constructor(t){super(),(0,s.S1n)(this,t,b,p,s.N8,{})}}const $=f},8096:(t,e,n)=>{n.d(e,{Z:()=>h});var s=n(2535),o=n(9546),a=n(1680);const l=t=>({}),r=t=>({});function i(t){let e;return{c(){e=(0,s.bGB)("a"),e.innerHTML='<span class="material-icons-outlined">arrow_back</span>',(0,s.Ljt)(e,"href","javascript:history.back()"),(0,s.Ljt)(e,"class","t-a-btn svelte-ba4chm")},m(t,n){(0,s.$Tr)(t,e,n)},d(t){t&&(0,s.ogt)(e)}}}function c(t){let e,n,a,c,u,d,h,m,p,b,f=t[0]&&i();const $=t[4]["top-extra"],L=(0,s.nuO)($,t,t[3],r),g=t[4].default,I=(0,s.nuO)(g,t,t[3],null);return{c(){e=(0,s.bGB)("div"),n=(0,s.bGB)("div"),f&&f.c(),a=(0,s.DhX)(),c=(0,s.bGB)("div"),u=(0,s.fLW)(t[1]),d=(0,s.DhX)(),L&&L.c(),h=(0,s.DhX)(),m=(0,s.bGB)("div"),I&&I.c(),(0,s.Ljt)(c,"class","heading svelte-ba4chm"),(0,s.Ljt)(n,"class","top svelte-ba4chm"),(0,s.Ljt)(m,"class","content svelte-ba4chm"),(0,s.Ljt)(e,"class","page svelte-ba4chm")},m(t,o){(0,s.$Tr)(t,e,o),(0,s.R3I)(e,n),f&&f.m(n,null),(0,s.R3I)(n,a),(0,s.R3I)(n,c),(0,s.R3I)(c,u),(0,s.R3I)(n,d),L&&L.m(n,null),(0,s.R3I)(e,h),(0,s.R3I)(e,m),I&&I.m(m,null),b=!0},p(t,[e]){t[0]?f||(f=i(),f.c(),f.m(n,a)):f&&(f.d(1),f=null),(!b||2&e)&&(0,s.rTO)(u,t[1]),L&&L.p&&(!b||8&e)&&(0,s.kmG)(L,$,t,t[3],b?(0,s.u2N)($,t[3],e,l):(0,s.VOJ)(t[3]),r),I&&I.p&&(!b||8&e)&&(0,s.kmG)(I,g,t,t[3],b?(0,s.u2N)(g,t[3],e,null):(0,s.VOJ)(t[3]),null)},i(t){b||((0,s.Ui)(L,t),(0,s.Ui)(I,t),(0,s.P$F)((()=>{p||(p=(0,s.uPJ)(e,o.JD,{},!0)),p.run(1)})),b=!0)},o(t){(0,s.etI)(L,t),(0,s.etI)(I,t),p||(p=(0,s.uPJ)(e,o.JD,{},!1)),p.run(0),b=!1},d(t){t&&(0,s.ogt)(e),f&&f.d(),L&&L.d(t),I&&I.d(t),t&&p&&p.end()}}}function u(t,e,n){let o,{$$slots:l={},$$scope:r}=e;const i=(0,a.Z)();let c=i.mobile;(0,s.FIv)(t,c,(t=>n(5,o=t))),i.drawer.set(!o);let{backButton:u=!1}=e,{heading:d}=e;return document.body.scrollTop=0,document.documentElement.scrollTop=0,t.$$set=t=>{"backButton"in t&&n(0,u=t.backButton),"heading"in t&&n(1,d=t.heading),"$$scope"in t&&n(3,r=t.$$scope)},[u,d,c,r,l]}class d extends s.f_C{constructor(t){super(),(0,s.S1n)(this,t,u,c,s.N8,{backButton:0,heading:1})}}const h=d},5755:(t,e,n)=>{function s(t,e=700){let n;return function(...s){const o=this;clearTimeout(n),n=setTimeout((()=>t.apply(o,s)),e)}}n.d(e,{D:()=>s})}}]);
//# sourceMappingURL=573.js.map